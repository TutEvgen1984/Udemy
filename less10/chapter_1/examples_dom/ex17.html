<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <title>Пример 17 - Дерево списков</title>
</head>

<body>

  <script>
    let data = { // Это сложный объект, в котором 2 основных объекта (2 раздела),в первом из которых 2 "ключ-значение", а во втором объекте 2 объекта, и у каждого по 2 "ключ-значение"/ В качестве значений могут быть другие объекты, смотри https://doka.guide/js/object/
      "Овощи": { // Объект №1
        "огурцы": 5, // ключ-значение №1.1
        "помидоры": 3 // ключ-значение №1.2
      },
      "Фрукты": { // Объект №2
        "красные": { // Объект №2.1
          "клубника": 2, // ключ-значение №2.1.1
          "малина": 4 // ключ-значение №2.1.2
        },
        "зеленые": { // Объект №2.2
          "яблоко": 6, // ключ-значение №2.2.1
          "лайм": 2 // ключ-значение №2.2.2
        }
      }
    }
    // Внеплановые строки кода:
    // console.log(Object.keys(data).length);
    // Получили 2

    // let data2 = {}
    // console.log(Object.keys(data2).length); 
    // Получили 0

    console.log(data["Овощи"]);
    // Получили: {"огурцы": 5, "помидоры": 3} // В качестве ключа у нас объект Овощи, в качестве значения у нас выводится не значение присвоенное ключу, а все "ключи-значения" объекта
    console.log(isNaN(data["Овощи"])); // Получили true потому что это не число
    console.log(!isNaN(data["Овощи"])); // Из-за ! мы получим true если будет в качестве значения будет число, что будет означать что мы внизу по иерархии объекта. Сейчас получили false. true тут появится только когда значение проверяемого элемента будет числом

    function createUl (objElement) {
      if(!Object.keys(objElement).length)  // Если никаких ключей в объекте НЕ будет, о чем скажет длина ключей равная 0
        return // тогда мы выходим из функции
        // Чтобы узнать какие существуют ключи у объекта, существует следующая конструкция: пишем Object.keys и в скобках имя нашего объекта. При этом Object пишется с большой буквы
      let ulElement = document.createElement('ul') // Создадим пустой элемент ul
      for(let key in objElement) { // циклом проходимся по всем ключам объекта. key - это текущий ключ в объекте
        let li = document.createElement('li') // создаем пункт списка
        if(!isNan(objElement[key])) // Проверяем: значение ключа является ли оно числом. Если это число, то это значит, что это конечный пункт, и делаем следущее
        li.textContent = key + objElement[key] // в строку списка в качестве текста вносим название ключа + значение ключа
        else // то есть если проверка показала, что это НЕ число
        li.textContent = key // в строку списка в качестве текста вносим название ключа
        let childrenUL = createUl(objElement[key]) // Это рекурсивная функция потому, что она вызывывается внутри себя. В качестве значения мы передаем значение ключа объекта и она делает с ним то, что делала только что
      }
    }
  </script>
</body>
</html>