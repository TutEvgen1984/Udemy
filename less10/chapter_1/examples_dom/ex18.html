<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <title>Пример 18 - Календарь</title>
</head>

<body>
  <div class="container"></div>

  <script>
    function createCalendar(elem,year,month) {
      elem = document.querySelector(elem)
      //  Нам удобнее передавать в функцию нормальный человеческий месяц 12, а функция должна его преобразовать в месяц 11 для рассчетов JS в котором месяцы от 0 до 11
      let mon = month - 1 
      let d = new Date(year, mon) // С помощью констуктора дат сгенерировали полную дату JS. Здесь у нас будет храниться дата, основанная на годе и месяце, которые будем передавать сами
      console.log(d); // Sat May 01 2021 00:00:00 GMT+0700 (GMT+07:00). Результат неправильный, должен быть 01 Апрель Чт, а не 01 май Суб. Это потому что мы в качестве значения подставили 4(апрель), но в JS 4 это май так как отсчет начинается с нуля (как будто 5-ый по счету).

      // далее создадим переменную содержащую шаблонные литералы в которых в виде текста будет находиться код для создания таблицы
      let table = `
      <table>
        <caption>${month}.${year}</caption>
        <tr>
          <th>пн</th>
          <th>вт</th>
          <th>ср</th>
          <th>чт</th>
          <th>пт</th>
          <th>сб</th>
          <th>вс</th>
        </tr>
        <tr>
      ` 
      // <tr> в конце это мы создали новый ряд, но специально не закрыли его для того чтобы дописать туда новые сгенерированные значения
      // элемент caption должен идти сразу же после открывающегося тега <table>

      // Далее цикл, который заполняет в таблице первые дни недели до нашего дня пустыми ячейками. Апрель 2021 года начинается с 1 апреля и это четверг, поэтому нам нужно всё до этого числа заполнить пустыми ячейками
      console.log(getDay(d)); // Получили: 3
      for(let i = 0; i<getDay(d); i++) { // getDay здесь это нами созданная функция. Знак меньше чтобы заполнять пустыми ячейками До первого числа (до 1 апреля) 
        table += '<td></td>' // Получили 3 пустые ячейки под Пн, Вт, Ср
      }

        // getDay(d) это мы берем переменную d в которой 

      table += '</tr></table>'
      elem.innerHTML = table

    }
    
    
    // Функция, которая преобразует наши введённые привычные нам дни недели с Пн(1) до Вс(7) в JavaScript_овские дни с Вс(0) по Сб(6) для дальнейшего внутреннего вычисления:
    function getDay(date) { // здесь getDay это нами самими придуманное название функции, несмотря на то, что оно совпадает с встроенным существующим методом объекта Date
      let day = date.getDay() // getDay это стандартный метод у объекта. Метод getDay() - получить день недели в понимании JS - от 0 (Воскресенье) до 6 (суббота)
      if(day == 0) day = 7 // так как в JS день начинается не с понедельника, а с воскресенья, то получается что по умолчанию 0-ой день это воскресенье, а понедельник это день 1. Делаем чтобы как только попали на день 0 (вс), то он стал днём 7 (дня 7 нет, это мы специально потому что следующая строка делает day-1 и превратит 7(несущ) в 6 (сб))
      return day-1 // пишем вернуть "-1" потому что нам нужно подать на вход вторник???
    }

    createCalendar('body', 2021, 4) // 4 это апрель
  </script>
</body>

</html>