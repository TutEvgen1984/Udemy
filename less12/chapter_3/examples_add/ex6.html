<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <title>Пример 6 - Регулярные выражения</title>
</head>

<body>

  <script>
    /*
    Регулярные выражения нужны для поиска и замены в каких-то текстовых строках

    // Статья: https://learn.javascript.ru/regexp-introduction

    // создание регулярного выражения способ 1:
    let regexp01 = new RegExp("",);
    // после запятой идут фланги
    // преимущество этого способа в том, что бы можем передавать какую-то динамическую строку `${}`

    // создание регулярного выражения способ 2:
    let regexp02 = /шаблон/флаги
    */

    // let tag = prompt("введите html-тег без < >", "h2")

    // let regexp = new RegExp(`<${tag}>`);
    // console.log(regexp); // /<h2>/
    // 2 слэша сами появились после того, как мы с помощью конструктора создали регулярное выражение

    // Модификаторы шаблонов
    // существует 6 флагов:
    // флаг i (independent Регистронезависимый шаблон) - передаём в том случае если хотим выполнить поиск независимо от регистра, то есть заглавные и маленькие буквы у нас будут рассматриваться как одно и тоже
    // флаг g (global Глобальный поиск) - если хотим искать все совпадения, а не только первое, если мы его не передаём, то при нахождении одного совпадения дальнейший поиск не ведётся
    // флаг m (multiple Многострочный текст) - включить многострочный режим
    // флаг s (single Считать текст одной строкой?) - Включает режим «dotall», при котором точка . может соответствовать символу перевода строки \n
    // флаг u - Включает полную поддержку Юникода.
    // флаг Y - Режим поиска на конкретной позиции в тексте

    // далее рассмотрим реальные примеры
    let string1 = 'Строка, еще одна строка';
    console.log(string1.match(/Строка/gi));
    // (2) ['Строка', 'строка']
    // получили массив из двух значений (а не из одного) благодаря g. У нас нашлась строка с заглавной буквой и строка с маленькой благодаря i
    // метод match может искать не только строку, но и регулярное выражение

    console.log(string1.match(/Строка/g));
    // ['Строка']
    // если i не указать, то находит только Строка который с большим регистром

    console.log(string1.match(/Строка/));
    // ['Строка', index: 0, input: 'Строка, еще одна строка', groups: undefined]
    // такой результат без флагов

    console.log(string1.match(/строка/));
    // ['строка', index: 17, input: 'Строка, еще одна строка', groups: undefined]

    console.log(string1.match(/JS/));
    // null
    // если наше регулярное выпадение не ждало никаких результатов поиска, то получаем null, а не пустой массив

    let string2 = 'Строка, еще одна строка';
    let replaced2_1 = string2.replace(/строка/ig, "заменено");
    console.log(replaced2_1);
    // заменено, еще одна заменено

    console.log(string2);
    // Строка, еще одна строка
    // то есть оригинал не меняется

    // Для замены одной части строки на другой существует метод replace().
    // При вызове в него нужно передать два аргумента — какую подстроку менять и на что. Если строка на замену не найдена, то замены не произойдёт.

    let replaced2_2 = string2.replace(/строка/ig, "$& дополнительный текст 1");
    console.log(replaced2_2);
    // Строка дополнительный текст 1, еще одна строка дополнительный текст 1
    // Спецсимволы $& :	вставляет всё найденное совпадение
    // с помощью специального символа $& мы в качестве замены найденного вставляем сначала то что нашли в неизменном виде, а затем добавили пробел и "дополнительный текст 1"

    // Проверка: regexp.test
    // Метод regexp.test(str) проверяет, есть ли хоть одно совпадение, если да, то возвращает true, иначе false.
    console.log(/строка/gi.test(string2));
    // true

    console.log(/строка33/gi.test(string2));
    // false

    // Способ то же самое но через переменную:
    let regexp2 = /строка/gi;
    console.log(regexp2.test(string2));
    // true

  </script>
</body>

</html>